# SQLit Adapter - Bun SQLite HTTP API
# Simple HTTP server providing SQLit API using Bun's built-in SQLite
# No external dependencies, single binary, ready for production

replicaCount: 1

image:
  repository: 502713364895.dkr.ecr.us-east-1.amazonaws.com/jeju/sqlit-adapter
  pullPolicy: Always
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: "sqlit-adapter"

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8546"
  prometheus.io/path: "/v1/status"

podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: false
  runAsUser: 0

service:
  type: ClusterIP
  port: 8546
  annotations: {}

# Configuration
config:
  port: 8546
  dataDir: "/data/sqlit/databases"
  logLevel: "info"

# Environment variables
env:
  - name: PORT
    value: "8546"
  - name: DATA_DIR
    value: "/data/sqlit/databases"

# Persistence
persistence:
  enabled: true
  storageClass: "gp3"
  size: 50Gi
  accessModes:
    - ReadWriteOnce

# Resources
resources:
  limits:
    cpu: 1000m
    memory: 2Gi
  requests:
    cpu: 100m
    memory: 256Mi

# Liveness probe
livenessProbe:
  httpGet:
    path: /v1/status
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# Readiness probe
readinessProbe:
  httpGet:
    path: /v1/status
    port: http
  initialDelaySeconds: 3
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
