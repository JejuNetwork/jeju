# GCP Testnet environment values
# Matches AWS testnet configuration for federation parity

environment: testnet
cluster_name: jeju-testnet-gcp
cloud_provider: gcp

# Enable ingress and certificates
ingress_enabled: true
cert_manager_enabled: true

# GCP-specific ingress class
ingress_class: gce
# Alternative: nginx if using nginx-ingress-controller on GKE
# ingress_class: nginx

# Single replicas for testnet (cost optimization)
replicas:
  op_node: 1
  sequencer: 1
  rpc: 1
  archive: 1
  batcher: 1
  proposer: 1
  challenger: 1
  jeju_da: 1
  bundler: 1
  crucible: 2
  gateway: 2
  subsquid_processor: 1
  subsquid_api: 2
  dws: 3

# Testnet resource allocations (same as AWS)
resources:
  op_node:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 1000m
      memory: 2Gi
  
  sequencer:
    limits:
      cpu: 4000m
      memory: 8Gi
    requests:
      cpu: 2000m
      memory: 4Gi
  
  rpc:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 1000m
      memory: 2Gi
  
  archive:
    limits:
      cpu: 4000m
      memory: 16Gi
    requests:
      cpu: 2000m
      memory: 8Gi
  
  batcher:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  proposer:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  challenger:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  jeju_da:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  
  bundler:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  crucible:
    api:
      limits:
        cpu: 1000m
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi
    executor:
      limits:
        cpu: 2000m
        memory: 4Gi
      requests:
        cpu: 1000m
        memory: 2Gi
  
  gateway:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi
  
  subsquid_processor:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  subsquid_api:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  
  dws:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 500m
      memory: 1Gi

# Persistence (GCP storage classes)
persistence:
  enabled: true
  storage_class: standard-rwo  # GCP standard SSD
  # Alternative: premium-rwo for premium SSD
  sizes:
    op_node: 100Gi
    sequencer: 500Gi
    rpc: 500Gi
    archive: 2000Gi  # 2Ti format not supported in GCP
    challenger: 50Gi
    dws: 100Gi

# Auto-scaling (disabled for testnet, fixed replicas)
autoscaling:
  enabled: false

# Sepolia L1 (same as AWS)
l1_rpc_url: https://ethereum-sepolia-rpc.publicnode.com
l1_chain_id: "11155111"
l2_chain_id: "420690"

# Domains
domain_name: jejunetwork.org
rpc_domain: gcp-testnet-rpc.jejunetwork.org
ws_domain: gcp-testnet-ws.jejunetwork.org
dws_domain: gcp-dws.testnet.jejunetwork.org
jeju_rpc_url: https://gcp-testnet-rpc.jejunetwork.org

# Rate limiting (same as AWS)
rate_limit:
  enabled: true
  requests_per_second: 50
  requests_per_minute: 2000
  max_connections_per_ip: 5
  burst_size: 100

# GCP settings
gcp_project_id: ""  # Set via CI/CD or terraform
gcp_region: us-central1
artifact_registry: ""  # Set via CI/CD or terraform output
cloud_armor_enabled: false  # No Cloud Armor for testnet

# DWS Configuration (same as AWS for parity)
dws:
  replicas: 3
  resources:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 500m
      memory: 1Gi
  persistence:
    size: 100Gi
  
  # TEE Configuration for testnet
  tee:
    enabled: true
    provider: intel_tdx
    attestation_required: true
  
  # External chain nodes provisioned via DWS
  external_chains:
    ethereum:
      enabled: true
      mode: reth
      tee_required: false
    arbitrum:
      enabled: true
      mode: nitro
      tee_required: false
    optimism:
      enabled: true
      mode: op_reth
      tee_required: false
    base:
      enabled: true
      mode: op_reth
      tee_required: false
    solana:
      enabled: true
      mode: solana_validator
      tee_required: false

# Federation configuration (for AWS/GCP cross-chain communication)
federation:
  enabled: true
  peer_chain: aws-testnet
  peer_rpc_url: https://testnet-rpc.jejunetwork.org
  peer_chain_id: "420690"
  bridge_contract: ""  # Set after deployment
  sequencer_set:
    - gcp-sequencer-1
    - aws-sequencer-1
