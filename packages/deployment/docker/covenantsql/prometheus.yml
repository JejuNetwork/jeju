# Prometheus Configuration for SQLit Cluster Monitoring

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'sqlit-localnet'

scrape_configs:
  # Block Producer metrics
  - job_name: 'sqlit-block-producer'
    static_configs:
      - targets: ['sqlit-bp:9100']
        labels:
          role: 'block-producer'
          node_id: 'bp-001'

  # Miner nodes metrics
  - job_name: 'sqlit-miners'
    static_configs:
      - targets:
          - 'sqlit-miner-1:9100'
          - 'sqlit-miner-2:9100'
          - 'sqlit-miner-3:9100'
        labels:
          role: 'miner'

  # HAProxy metrics
  - job_name: 'sqlit-haproxy'
    static_configs:
      - targets: ['sqlit-lb:8080']
        labels:
          role: 'load-balancer'
    metrics_path: /stats
    params:
      format: ['prometheus']

# Alerting rules
rule_files:
  - /etc/prometheus/rules/*.yml
